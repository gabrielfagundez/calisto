var Home = (function() {

  var interval_id;

  var parseTime = function() {
    return $('#current-page #info').data().time * 1000;
  }

  var parsePageName = function() {
    return $('#current-page #info').data().name;
  }

  var refreshPage = function() {
    clearInterval(interval_id);
    $.get('/next', function(html) {
      $('#current-page').html(html)
      updateBodyClass();
    }, 'html');
  }

  var autoRefresh = function () {
    interval_id = setInterval(refreshPage, parseTime());
  }

  var updateBodyClass = function () {
    $('body').removeClass().addClass(parsePageName());
  }

  return {
    init: function() {
      autoRefresh();
    }
  }
})();

$('document').ready(function() {
  // TODO: This is being executed twice. Review.
  Home.init()
});